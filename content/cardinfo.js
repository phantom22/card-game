var cards = {

	0:{

		0:{

			"name":"AS",
			"value":14

		},

		1:{

			"name":"2S",
			"value":2

		},

		2:{

			"name":"3S",
			"value":3

		},

		3:{

			"name":"4S",
			"value":4

		},

		4:{

			"name":"5S",
			"value":5

		},

		5:{

			"name":"6S",
			"value":6

		},

		6:{

			"name":"7S",
			"value":7

		},

		7:{

			"name":"8S",
			"value":8

		},

		8:{

			"name":"9S",
			"value":9

		},

		9:{

			"name":"10S",
			"value":10

		},

		10:{

			"name":"JS",
			"value":11

		},

		11:{

			"name":"QS",
			"value":12

		},

		12:{

			"name":"KS",
			"value":13

		},

		13:{

			"name":"JOKER",
			"value":15

		}

	},

	1:{

		0:{

			"name":"AH",
			"value":14

		},

		1:{

			"name":"2H",
			"value":2

		},

		2:{

			"name":"3H",
			"value":3

		},

		3:{

			"name":"4H",
			"value":4

		},

		4:{

			"name":"5H",
			"value":5

		},

		5:{

			"name":"6H",
			"value":6

		},

		6:{

			"name":"7H",
			"value":7

		},

		7:{

			"name":"8H",
			"value":8

		},

		8:{

			"name":"9H",
			"value":9

			},

		9:{

			"name":"10H",
			"value":10

		},

		10:{

			"name":"JH",
			"value":11

		},

		11:{

			"name":"QH",
			"value":12

		},

		12:{

			"name":"KH",
			"value":13

		},

		13:{

			"name":"JOKER",
			"value":15

		}

	},

	2:{

		0:{

			"name":"AC",
			"value":14

		},

		1:{

			"name":"2C",
			"value":2

		},

		2:{

			"name":"3C",
			"value":3

		},

		3:{

			"name":"4C",
			"value":4

		},

		4:{

			"name":"5C",
			"value":5

		},

		5:{

			"name":"6C",
			"value":6

		},

		6:{

			"name":"7C",
			"value":7

		},
		
		7:{

			"name":"8C",
			"value":8

		},

		8:{

			"name":"9C",
			"value":9

		},

		9:{

			"name":"10C",
			"value":10

		},

		10:{

			"name":"JC",
			"value":11

		},

		11:{

			"name":"QC",
			"value":12

		},

		12:{

			"name":"KC",
			"value":13

		},

		13:{

			"name":"JOKER",
			"value":15

		}

	},

	3:{

		0:{

			"name":"AD",
			"value":14

		},

		1:{

			"name":"2D",
			"value":2

		},

		2:{

			"name":"3D",
			"value":3

		},

		3:{

			"name":"4D",
			"value":4

		},

		4:{

			"name":"5D",
			"value":5

		},

		5:{

			"name":"6D",
			"value":6

		},

		6:{

			"name":"7D",
			"value":7

		},

		7:{

			"name":"8D",
			"value":8

		},

		8:{

			"name":"9D",
			"value":9

		},

		9:{

			"name":"10D",
			"value":10

		},

		10:{

			"name":"JD",
			"value":11

		},

		11:{

			"name":"QD",
			"value":12

		},

		12:{

			"name":"KD",
			"value":13

		},

		13:{

			"name":"JOKER",
			"value":15

		}

	},
	
	4:{
	
		0:{
			
			"name":"X0",
			"value":60
		
		},
		
		1:{
			
			"name":"X1",
			"value":80
		
		},
		
		2:{
			
			"name":"X2",
			"value":100
		
		},
		
		3:{
			
			"name":"X3",
			"value":125
		
		},
		
		4:{
			
			"name":"X4",
			"value":150
		
		},
		
		5:{
			
			"name":"X5",
			"value":175
		
		},
		
		6:{
			
			"name":"X6",
			"value":200
		
		},
		
		7:{
			
			"name":"X7",
			"value":230
		
		},
		
		8:{
			
			"name":"X8",
			"value":260
		
		},
		
		9:{
			
			"name":"X9",
			"value":290
		
		},
		
		10:{
			
			"name":"X10",
			"value":320
		
		},
		
		11:{
			
			"name":"X11",
			"value":355
		
		},
		
		12:{
			
			"name":"X12",
			"value":390
		
		},
		
		13:{
			
			"name":"X13",
			"value":425
		
		},
		
		14:{
			
			"name":"X14",
			"value":465
		
		},
		
		15:{
			
			"name":"X15",
			"value":505
		
		},
		
		16:{
			
			"name":"X16",
			"value":550
		
		},
		
		17:{
			
			"name":"X17",
			"value":595
		
		},
		
		18:{
			
			"name":"X18",
			"value":640
		
		},
		
		19:{
			
			"name":"X19",
			"value":590
		
		},
		
		20:{
			
			"name":"X20",
			"value":640
		
		},
		
		21:{
			
			"name":"X21",
			"value":695
		
		},
		
		22:{
			
			"name":"X22",
			"value":750
		
		},
		
		23:{
			
			"name":"X23",
			"value":810
		
		},
		
		24:{
			
			"name":"X24",
			"value":875
		
		},
		
		25:{
			
			"name":"X25",
			"value":940
		
		},
		
		26:{
			
			"name":"X26",
			"value":1010
		
		},
		
		27:{
			
			"name":"X27",
			"value":1085
		
		},
		
		28:{
			
			"name":"X28",
			"value":1160
		
		},
		
		29:{
			
			"name":"X29",
			"value":1240
		
		},
		
		30:{
			
			"name":"X30",
			"value":1325
		
		}

	}

}

const lang = "RU";

var currentDeck = [];

function pick(n,debug) {
	
	if (debug) {
		// if there is already a table, deleting it
		if (document.querySelector("#mainTable")) {

			var lastTable = document.getElementById("mainTable");
			lastTable.parentNode.removeChild(lastTable);

		}
	
		// creating a table with n amount of th and n amount of td
		var table = document.createElement("table");
		table.id = "mainTable";
		table.className = "hide";
		// table hidden
		table.style = "visibility:hidden";
		var tbody = document.createElement("tbody");

		var tr = document.createElement("tr");
		for (i = 0;i < n;i++) {
		
			var th = document.createElement("th");
			th.id = "card" + i;
			th.dataset.index = i + 1;
			tr.appendChild(th);
		
		}

		tbody.appendChild(tr);

		var tr = document.createElement("tr");
		for (i = 0;i < n;i++) {
		
			var td = document.createElement("td");
			td.id = "info" + i;
			th.dataset.index = i + 1;
			tr.appendChild(td);
		
		}

		tbody.appendChild(tr);
		table.appendChild(tbody);
		document.body.appendChild(table);

	}

	// randomizing a card for n times
	var tempd = 0;
	var tempde = 0;
	currentDeck = [];
	currentDeck.boost = Math.floor(Math.random() * 5);

	for (i = 0;i < n;i++) {

		var currentCard = [];

		var type = Math.floor(Math.random() * 5);

		if (type === 4) {
			
			var number = Math.floor(Math.random() * 31);
			if (number !== 30) {
				tempd += 1;
			}
			else {
				tempde += 1;
			}

		}
		else {

			var number = Math.floor(Math.random() * 14);

		}

		var card = cards[type][number];

		var cardName = card.name;
		currentCard.push(cardName);

		var cardVal = card.value;
		var multiplier = 0;
		if (type == currentDeck.boost && cardName !== "JOKER") {

			var cardVal = cardVal * 2;
			multiplier += 2;

		}

		else if (type == currentDeck.boost && cardName == "JOKER") {

			var cardVal = cardVal * 3;
			multiplier += 3;

		}

		currentCard.push(cardVal);

		var cardSrc = "content/" + cardName + ".png";
		currentCard.push(cardSrc);

		if (!currentDeck.strenght) {

			currentDeck.strenght = 0;

		}

		currentCard.push(type);
		currentCard.push(multiplier);
		currentDeck.push(currentCard);

	}

	// if no divinities
	if (tempd == 0) {

		tempd = undefined;

	}
	
	if (tempde == 0) {

		tempde = undefined;
	
	}

	// boosting the strenght of the card by x3, if at least one divinity and the card isn't a divinity
	if (tempd) {

		for (i = 0;i < n;i++) {

			// if not divinity
			if (currentDeck[i][3] !== 4) {

				// calculating strenght
				currentDeck[i][1] = currentDeck[i][1] * (tempd * 3);

				// if current card multiplier is not 0
				if (currentDeck[i][4] !== 0) {

					currentDeck[i][4] = currentDeck[i][4] * (tempd * 3);

				}

				// if current card multiplier is 0
				else if (currentDeck[i][4] == 0) {

					currentDeck[i][4] += tempd * 3;

				}

			}

		}

	}
	
	// if devil, every card except devil x10
	if (tempde) {

		for (i = 0;i < n;i++) {

			// if not devil
			if (currentDeck[i][0] !== "X30") {

				// calculating strenght
				currentDeck[i][1] = currentDeck[i][1] * (tempde * 10);

				// if current card multiplier is not 0
				if (currentDeck[i][4] !== 0) {

					currentDeck[i][4] = currentDeck[i][4] * (tempde * 10);

				}

				// if current card multiplier is 0
				else if (currentDeck[i][4] == 0) {

					currentDeck[i][4] += tempde * 10;

				}

			}

		}

	}
	
	// overall strenght calculation
	for (i = 0;i < n;i++) {
		currentDeck.strenght += currentDeck[i][1];
	}

	if (debug) {
	
	// classify card strenght with a border color
		for (i = 0;i < n;i++) {

			if (currentDeck[i][1] <= 35) {
				var rarity = "r-common";
			}
			else if (currentDeck[i][1] > 35 && currentDeck[i][1] <= 70) {
				var rarity = "r-epic";
			}
			else if (currentDeck[i][1] > 70 && currentDeck[i][1] <= 105) {
				var rarity = "r-rare";
			}
			else if (currentDeck[i][1] > 105 && currentDeck[i][1] <= 140) {
				var rarity = "r-unique";
			}
			else if (currentDeck[i][1] > 140 && currentDeck[i][1] <= 175) {
				var rarity = "r-leggendary";
			}
			else if (currentDeck[i][1] > 175 && currentDeck[i][1] <= 1000) {
				var rarity = "r-god1";
			}
			else if (currentDeck[i][1] > 1000 && currentDeck[i][1] <= 2000) {
				var rarity = "r-god2";
			}
			else if (currentDeck[i][1] > 2000 && currentDeck[i][1] <= 3000) {
				var rarity = "r-god3";
			}

			// card image output
			document.getElementById("card" + i).innerHTML = "<img class='card " + rarity + "'" + " src='" + currentDeck[i][2] + "' alt='" + currentDeck[i][0] + "'>";
			
			// classify amount of strenght added by boost with a color
			if (currentDeck[i][1]) {
				
				// if has multiplier
				if (currentDeck[i][4] !== 0) {
					var mult = currentDeck[i][4];
					var temp_added = (currentDeck[i][1] / mult) * (mult - 1);
				}
				
				// if divinity
				else if (currentDeck[i][3] == 4) {
					var temp_added = currentDeck[i][1];
				}

				if (temp_added) {

					if (temp_added <= 35) {
						var temp = "common";
					}
					else if (temp_added > 35 && temp_added <= 70) {
						var temp = "epic";
					}
					else if (temp_added > 70 && temp_added <= 105) {
						var temp = "rare";
					}
					else if (temp_added > 105 && temp_added <= 140) {
						var temp = "unique";
					}
					else if (temp_added > 140 && temp_added <= 175) {
						var temp = "leggendary";
					}
					else if (temp_added > 175) {
						var temp = "god";
					}

				}

			}

			var strenght_output = currentDeck[i][1];
			
			// if not divinity
			if (currentDeck[i][4] !== 0 && temp) {
				strenght_output += " <span class='" + temp + "'>" + "(x" + currentDeck[i][4] + ")" + "</span>";
			}
			
			// if divinity
			else if (currentDeck[i][3] == 4) {
				strenght_output = "<span class='" + temp + "'>" + currentDeck[i][1] + "</span>";
			}
			
			document.getElementById("info" + i).innerHTML = strenght_output;

		}

		// card type (for output)
		switch (currentDeck.boost) {

			// EN and RU support
			case 0: if(lang == "EN"){var currentBoost = "spades"}else if(lang == "RU"){var currentBoost = "Пика"}; break;
			case 1: if(lang == "EN"){var currentBoost = "hearts"}else if(lang == "RU"){var currentBoost = "Чирва"}; break;
			case 2: if(lang == "EN"){var currentBoost = "clubs"}else if(lang == "RU"){var currentBoost = "Кресты"}; break;
			case 3: if(lang == "EN"){var currentBoost = "diamonds"}else if(lang == "RU"){var currentBoost = "Бубна"}; break;
			case 4: if(lang == "EN"){var currentBoost = "divinity"}else if(lang == "RU"){var currentBoost = "Божество"}; break;

		}

		if (lang == "EN") {var msg_placeholder1 = "Strenght: ";var msg_placeholder2 = "Trump card: ";}
		else if (lang == "RU") {var msg_placeholder1 = "Сила: ";var msg_placeholder2 = "Козырь: ";}

		// info output
		document.getElementById("strenght").innerHTML = msg_placeholder1 + "<span>" + currentDeck.strenght + "</span>";
		document.getElementById("boost").innerHTML = msg_placeholder2 + "<span>" + currentBoost + "</span>";

		// table visible
		document.getElementById("mainTable").style = "visibility:visible";

	}


}

pick(7,true);
